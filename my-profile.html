<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - CCHIS</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mother-theme.css">
</head>

<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand"><i class="fas fa-heartbeat"></i> CCHIS</div>
        </div>
        <div class="sidebar-menu">
            <a href="mother-dashboard.html" class="menu-item">
                <i class="fas fa-home"></i> My Dashboard
            </a>
            <a href="my-profile.html" class="menu-item active">
                <i class="fas fa-user"></i> My Profile
            </a>
            <a href="my-child.html" class="menu-item">
                <i class="fas fa-baby"></i> My Child
            </a>
            <a href="my-appointments.html" class="menu-item">
                <i class="fas fa-calendar-alt"></i> My Appointments
            </a>
            <a href="medical-history.html" class="menu-item">
                <i class="fas fa-file-medical"></i> Medical History
            </a>
            <a href="my-records.html" class="menu-item">
                <i class="fas fa-folder-open"></i> Medical Records
            </a>
            <a href="health-resources.html" class="menu-item">
                <i class="fas fa-book-medical"></i> Health Resources
            </a>
            <a href="contact-worker.html" class="menu-item">
                <i class="fas fa-comment-medical"></i> Contact Health Worker
            </a>
            <a href="index.html" class="menu-item" style="margin-top: auto; color: var(--error-color);">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="dashboard-header" style="margin-bottom: 32px; padding-bottom: 0; background: transparent;">
            <h1>My Profile</h1>
        </div>

        <div class="card" style="position: relative;">
            <button class="btn btn-secondary" style="position: absolute; top: 24px; right: 24px;">
                <i class="fas fa-edit"></i> Edit Profile
            </button>

            <div class="grid-container" style="grid-template-columns: 1fr 3fr; gap: 48px;">
                <!-- Left Column: Photo -->
                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div
                        style="width: 120px; height: 120px; border-radius: 50%; background: var(--primary-color); color: white; display: flex; align-items: center; justify-content: center; font-size: 48px; border: 4px solid var(--primary-color); margin-bottom: 16px;">
                        EM
                    </div>
                    <h2 style="margin-bottom: 4px;">Ella Martinez</h2>
                    <p class="text-muted">Mother</p>
                    <div class="badge badge-safe" style="margin-top: 12px;">Active Account</div>
                </div>

                <!-- Right Column: Info -->
                <div>
                    <!-- Personal Info -->
                    <div style="margin-bottom: 32px;">
                        <h3
                            style="border-bottom: 1px solid var(--border-color); padding-bottom: 8px; margin-bottom: 16px; color: var(--primary-color);">
                            Personal Information</h3>
                        <div class="grid-2-col" style="display: grid; gap: 24px;">
                            <div>
                                <label class="text-muted text-small">Full Name</label>
                                <div style="font-weight: 600;">Ella Martinez</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Date of Birth</label>
                                <div style="font-weight: 600;">May 15, 1995 (28 yrs)</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Civil Status</label>
                                <div style="font-weight: 600;">Married</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Occupation</label>
                                <div style="font-weight: 600;">Teacher</div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Info -->
                    <div style="margin-bottom: 32px;">
                        <h3
                            style="border-bottom: 1px solid var(--border-color); padding-bottom: 8px; margin-bottom: 16px; color: var(--primary-color);">
                            Contact Details</h3>
                        <div class="grid-2-col" style="display: grid; gap: 24px;">
                            <div>
                                <label class="text-muted text-small">Phone Number</label>
                                <div style="font-weight: 600;">0917-123-4567</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Email Address</label>
                                <div style="font-weight: 600;">ella.martinez@email.com</div>
                            </div>
                            <div style="grid-column: span 2;">
                                <label class="text-muted text-small">Home Address</label>
                                <div style="font-weight: 600;">Brgy. San Jose, Pasig City</div>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Contact -->
                    <div>
                        <h3
                            style="border-bottom: 1px solid var(--border-color); padding-bottom: 8px; margin-bottom: 16px; color: var(--primary-color);">
                            Emergency Contact</h3>
                        <div class="grid-2-col" style="display: grid; gap: 24px;">
                            <div>
                                <label class="text-muted text-small">Name</label>
                                <div style="font-weight: 600;">Juan Martinez</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Relationship</label>
                                <div style="font-weight: 600;">Husband</div>
                            </div>
                            <div>
                                <label class="text-muted text-small">Phone Number</label>
                                <div style="font-weight: 600;">0917-111-2222</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const userId = localStorage.getItem('userId');
            if (!userId) return;

            // Find mother data
            const mother = window.mockData.mothers.find(m => m.id === userId);
            if (!mother) return;

            // Update Profile Header
            document.querySelector('.card h2').textContent = mother.name;
            document.querySelector('.card .text-muted').textContent = 'Mother'; // Could be dynamic if needed

            // Initials
            const initials = mother.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            document.querySelector('.card div[style*="border-radius: 50%"]').textContent = initials;

            // Update Personal Info
            const personalInfo = document.querySelectorAll('.grid-2-col')[0];
            if (personalInfo) {
                const divs = personalInfo.querySelectorAll('div > div[style*="font-weight: 600"]');
                if (divs.length >= 4) {
                    divs[0].textContent = mother.name;
                    divs[1].textContent = `${new Date(mother.dob).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })} (${mother.age} yrs)`;
                    divs[2].textContent = mother.civilStatus;
                    divs[3].textContent = mother.occupation;
                }
            }

            // Update Contact Info
            const contactInfo = document.querySelectorAll('.grid-2-col')[1];
            if (contactInfo) {
                const divs = contactInfo.querySelectorAll('div > div[style*="font-weight: 600"]');
                if (divs.length >= 3) {
                    divs[0].textContent = mother.contact;
                    divs[1].textContent = mother.email;
                    divs[2].textContent = mother.address;
                }
            }

            // Update Emergency Contact
            const emergencyInfo = document.querySelectorAll('.grid-2-col')[2];
            if (emergencyInfo) {
                const divs = emergencyInfo.querySelectorAll('div > div[style*="font-weight: 600"]');
                // Parse emergency contact string if it follows "Name (Relation) - Number" format
                // Or just display raw if structure varies. 
                // Mock data format: "Juan Santos (Husband) - 0917-111-2222"
                if (divs.length >= 3) {
                    const parts = mother.emergencyContact.split(' - ');
                    const nameRel = parts[0] || mother.emergencyContact;
                    const phone = parts[1] || 'N/A';

                    // Try to extract relation from parenthesis
                    const relationMatch = nameRel.match(/\(([^)]+)\)/);
                    const relation = relationMatch ? relationMatch[1] : 'N/A';
                    const name = nameRel.replace(/\s*\([^)]+\)/, '').trim();

                    divs[0].textContent = name;
                    divs[1].textContent = relation;
                    divs[2].textContent = phone;
                }
            }
        });
    </script>
</body>

</html>