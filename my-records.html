<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Records - CCHIS</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mother-theme.css">
</head>

<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand"><i class="fas fa-heartbeat"></i> CCHIS</div>
        </div>
        <div class="sidebar-menu">
            <a href="mother-dashboard.html" class="menu-item">
                <i class="fas fa-home"></i> My Dashboard
            </a>
            <a href="my-profile.html" class="menu-item">
                <i class="fas fa-user"></i> My Profile
            </a>
            <a href="my-child.html" class="menu-item">
                <i class="fas fa-baby"></i> My Child
            </a>
            <a href="my-appointments.html" class="menu-item">
                <i class="fas fa-calendar-alt"></i> My Appointments
            </a>
            <a href="medical-history.html" class="menu-item">
                <i class="fas fa-file-medical"></i> Medical History
            </a>
            <a href="my-records.html" class="menu-item active">
                <i class="fas fa-folder-open"></i> Medical Records
            </a>
            <a href="#" class="menu-item">
                <i class="fas fa-book-medical"></i> Health Resources
            </a>
            <a href="contact-worker.html" class="menu-item">
                <i class="fas fa-comment-medical"></i> Contact Health Worker
            </a>
            <a href="index.html" class="menu-item" style="margin-top: auto; color: var(--error-color);">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="dashboard-header" style="margin-bottom: 32px; padding-bottom: 0; background: transparent;">
            <h1>Medical Records</h1>
        </div>

        <div class="grid-container" style="grid-template-columns: 3fr 1fr;">
            <!-- Left Column: Timeline -->
            <div class="left-column">
                <div class="card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                        <h3>Visit History</h3>
                        <button class="btn btn-outline btn-sm"><i class="fas fa-download"></i> Download All</button>
                    </div>

                    <div class="timeline" style="padding-left: 16px;">
                        <!-- Record 1 -->
                        <div class="timeline-item">
                            <div class="timeline-connector">
                                <div class="timeline-dot" style="background: var(--primary-color); color: white;">
                                    <i class="fas fa-notes-medical"></i>
                                </div>
                                <div class="timeline-line"></div>
                            </div>
                            <div class="timeline-content"
                                style="background: var(--background-color); padding: 24px; border-radius: var(--radius-md); width: 100%;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                    <div>
                                        <h4 style="margin-bottom: 4px;">48-Hour Postpartum Checkup</h4>
                                        <div class="text-muted text-small">Dec 12, 2023 • Dr. Maria Clara</div>
                                    </div>
                                    <button class="btn btn-text text-small"><i class="fas fa-download"></i> PDF</button>
                                </div>
                                <p style="margin-bottom: 16px; font-size: 15px;">Normal recovery. BP 120/80. No
                                    complications reported. Patient advised on breastfeeding techniques.</p>
                                <div style="display: flex; gap: 8px;">
                                    <span class="badge badge-safe">Normal Findings</span>
                                    <span class="badge badge-info">Follow-up Scheduled</span>
                                </div>
                            </div>
                        </div>

                        <!-- Record 2 -->
                        <div class="timeline-item">
                            <div class="timeline-connector">
                                <div class="timeline-dot" style="background: var(--secondary-color); color: white;">
                                    <i class="fas fa-baby"></i>
                                </div>
                                <div class="timeline-line"></div>
                            </div>
                            <div class="timeline-content"
                                style="background: var(--background-color); padding: 24px; border-radius: var(--radius-md); width: 100%;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                    <div>
                                        <h4 style="margin-bottom: 4px;">Child Birth / Delivery</h4>
                                        <div class="text-muted text-small">Dec 12, 2023 • Dr. Maria Clara</div>
                                    </div>
                                    <button class="btn btn-text text-small"><i class="fas fa-download"></i> PDF</button>
                                </div>
                                <p style="margin-bottom: 16px; font-size: 15px;">Normal Spontaneous Delivery. Baby Girl.
                                    3.1kg. APGAR Score 9/10.</p>
                                <div style="display: flex; gap: 8px;">
                                    <span class="badge badge-safe">Successful Delivery</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Summary -->
            <div class="right-column">
                <div class="card">
                    <h3>Quick Summary</h3>
                    <div style="margin-top: 16px;">
                        <div style="margin-bottom: 16px;">
                            <div class="text-muted text-small">Total Visits</div>
                            <div style="font-size: 24px; font-weight: 700;">2</div>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <div class="text-muted text-small">Next Due</div>
                            <div style="font-size: 16px; font-weight: 600; color: var(--primary-color);">Jan 10, 2025
                            </div>
                        </div>
                        <hr style="border: 0; border-top: 1px solid var(--border-color); margin: 16px 0;">
                        <div>
                            <div class="text-muted text-small" style="margin-bottom: 8px;">Recent Lab Results</div>
                            <div class="text-muted text-small" style="font-style: italic;">No recent lab results</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/export-service.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Attach export functionality
            const downloadBtn = document.querySelector('.btn-outline');
            if (downloadBtn) {
                downloadBtn.addEventListener('click', function () {
                    const userId = localStorage.getItem('userId');
                    if (userId) {
                        // Change button state
                        const originalText = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
                        this.disabled = true;

                        // Generate PDF
                        setTimeout(() => {
                            ExportService.generateMedicalRecordPDF(userId);

                            // Reset button
                            this.innerHTML = originalText;
                            this.disabled = false;
                        }, 500);
                    } else {
                        alert('Please log in to download records.');
                    }
                });
            }
        });
    </script>
</body>

</html>