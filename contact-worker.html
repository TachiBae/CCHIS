<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Health Worker - CCHIS</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mother-theme.css">
</head>

<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand"><i class="fas fa-heartbeat"></i> CCHIS</div>
        </div>
        <div class="sidebar-menu">
            <a href="mother-dashboard.html" class="menu-item">
                <i class="fas fa-home"></i> My Dashboard
            </a>
            <a href="my-profile.html" class="menu-item">
                <i class="fas fa-user"></i> My Profile
            </a>
            <a href="my-child.html" class="menu-item">
                <i class="fas fa-baby"></i> My Child
            </a>
            <a href="my-appointments.html" class="menu-item">
                <i class="fas fa-calendar-alt"></i> My Appointments
            </a>
            <a href="medical-history.html" class="menu-item">
                <i class="fas fa-file-medical"></i> Medical History
            </a>
            <a href="my-records.html" class="menu-item">
                <i class="fas fa-file-medical"></i> Medical Records
            </a>
            <a href="health-resources.html" class="menu-item">
                <i class="fas fa-book-medical"></i> Health Resources
            </a>
            <a href="contact-worker.html" class="menu-item active">
                <i class="fas fa-comment-medical"></i> Contact Health Worker
            </a>
            <a href="index.html" class="menu-item" style="margin-top: auto; color: var(--error-color);">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="dashboard-header" style="margin-bottom: 32px; padding-bottom: 0; background: transparent;">
            <h1>Contact Health Worker</h1>
            <p class="text-muted">Send a message to your assigned health care provider</p>
        </div>

        <div class="grid-container" style="grid-template-columns: 2fr 1fr;">
            <!-- Left: Contact Form -->
            <div class="card">
                <h3 style="margin-bottom: 24px;">Send a Message</h3>

                <div id="success-message"
                    style="display: none; background: #d4edda; color: #155724; padding: 16px; border-radius: 8px; margin-bottom: 24px; border: 1px solid #c3e6cb;">
                    <i class="fas fa-check-circle"></i> Your message has been sent successfully! A health worker will
                    respond to you soon.
                </div>

                <form id="contact-form">
                    <div class="form-group">
                        <label for="contact-subject">Subject*</label>
                        <select id="contact-subject" class="form-control" required>
                            <option value="">Select a topic...</option>
                            <option value="vaccine">Vaccination Schedule Question</option>
                            <option value="appointment">Appointment Request</option>
                            <option value="health">Health Concern</option>
                            <option value="postpartum">Postpartum Care</option>
                            <option value="child">Child Development</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="contact-message">Message*</label>
                        <textarea id="contact-message" class="form-control" rows="6"
                            placeholder="Please describe your concern or question in detail..." required></textarea>
                        <small class="text-muted">For emergencies, please call your health center directly.</small>
                    </div>

                    <div class="form-group">
                        <label for="contact-phone">Preferred Contact Number</label>
                        <input type="tel" id="contact-phone" class="form-control" placeholder="0917-XXX-XXXX">
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                </form>
            </div>

            <!-- Right: Health Worker Info -->
            <div>
                <div class="card">
                    <h3 style="margin-bottom: 16px;">Your Health Worker</h3>

                    <div style="text-align: center; margin-bottom: 16px;">
                        <div
                            style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; display: flex; align-items: center; justify-content: center; font-size: 32px; margin: 0 auto 12px auto; border: 3px solid white; box-shadow: var(--shadow-sm);">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div style="font-weight: 700; font-size: 18px;">Dr. Ron</div>
                        <div class="text-muted text-small">Obstetrician</div>
                    </div>

                    <hr style="margin: 16px 0; border: 0; border-top: 1px solid var(--border-color);">

                    <div style="margin-bottom: 12px;">
                        <div class="text-muted text-small">Affiliation</div>
                        <div style="font-weight: 600;">Pasig City General Hospital</div>
                    </div>

                    <div style="margin-bottom: 12px;">
                        <div class="text-muted text-small">Response Time</div>
                        <div style="font-weight: 600;">Usually within 24 hours</div>
                    </div>

                    <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-top: 16px;">
                        <div style="font-size: 12px; color: #666; line-height: 1.6;">
                            <i class="fas fa-info-circle"></i> Your assigned health worker will receive your message and
                            respond as soon as possible.
                        </div>
                    </div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white; margin-bottom: 12px;">Emergency Hotline</h4>
                    <div style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">
                        <i class="fas fa-phone-alt"></i> 911
                    </div>
                    <p style="font-size: 13px; margin: 0; opacity: 0.9;">
                        For medical emergencies, please call 911 or go to the nearest hospital immediately.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
    <script>
        // Handle contact form submission
        document.getElementById('contact-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const subject = document.getElementById('contact-subject').value;
            const message = document.getElementById('contact-message').value;
            const phone = document.getElementById('contact-phone').value;

            // Get current user info
            const userId = localStorage.getItem('userId');
            const userName = localStorage.getItem('userName');

            // Create contact request
            const contactRequest = {
                id: 'CR' + (window.mockData.contactRequests ? window.mockData.contactRequests.length + 1 : 1).toString().padStart(3, '0'),
                motherId: userId,
                motherName: userName,
                subject: document.getElementById('contact-subject').options[document.getElementById('contact-subject').selectedIndex].text,
                message: message,
                contactPhone: phone || 'Not provided',
                status: 'Pending',
                dateCreated: new Date().toISOString().split('T')[0],
                assignedTo: 'D001'
            };

            // Initialize contactRequests if it doesn't exist
            if (!window.mockData.contactRequests) {
                window.mockData.contactRequests = [];
            }

            window.mockData.contactRequests.push(contactRequest);

            // Create notification for health worker
            const notification = {
                id: 'N' + (window.mockData.notifications.length + 1).toString().padStart(3, '0'),
                userId: 'D001',
                recipientRole: 'doctor',
                type: 'info',
                icon: 'comment-medical',
                priority: 'normal',
                message: `New contact request from ${userName}`,
                time: 'Just now',
                actionUrl: 'profiles.html',
                isRead: false
            };

            window.mockData.notifications.push(notification);

            // Save to localStorage
            localStorage.setItem('cchisData', JSON.stringify(window.mockData));

            // Show success message
            document.getElementById('success-message').style.display = 'block';

            // Reset form
            this.reset();

            // Hide success message after 5 seconds
            setTimeout(() => {
                document.getElementById('success-message').style.display = 'none';
            }, 5000);

            // Scroll to top to show success message
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>

</html>